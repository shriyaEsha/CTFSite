<html>
<link href="css/bootstrap.min.css" rel="stylesheet">
<style>
#posts{ 
background:#eee;
padding:30px;
}
.post{
	background:#fff;
	margin:10px;
	padding:10px;
}
.post img{
	width:100%;
}
#grid.container .post img{
	padding:0;
}
#grid > #posts .post{
	width:325px;
	display: inline-block;
}
</style>
<div class="col-md-12">
<div id="grid">
	<div id="posts">
			<div class="post" style="height:500px;">
				<img src="images/yellow.jpg"/>
				<strong>Title goes here</strong>
				<small>category</small>
			</div>
			<div class="post">
				<img src="images/bg1.png">
				<strong>Title goes here</strong>
				<small>category</small>
			</div>
			<div class="post">
				<img src="images/yellow.jpg"/>
				<strong>Title goes here</strong>
				<small>category</small>
			</div>
			<div class="post" style="height:500px">
				<img src="images/yellow.jpg"/>
				<strong>Title goes here</strong>
				<small>category</small>
			</div>
			<div class="post">
				<img src="images/yellow.jpg"/>
				<strong>Title goes here</strong>
				<small>category</small>
			</div>
			<div class="post" style="height:300px">
				<img src="images/yellow.jpg"/>
				<strong>Title goes here</strong>
				<small>category</small>
			</div>
			<div class="post" style="height:500px">
				<img src="images/yellow.jpg"/>
				<strong>Title goes here</strong>
				<small>category</small>
			</div>
			<div class="post">
				<img src="images/yellow.jpg"/>
				<strong>Title goes here</strong>
				<small>category</small>
			</div>
			<div class="post" style="height:400px">
				<img src="images/yellow.jpg"/>
				<strong>Title goes here</strong>
				<small>category</small>
			</div>
		</div>
	</div>
</div>
<script src="js/jquery.js"></script>
<script src="js/masonry.pkgd.min.js"></script>

<script>
	jQuery(window).load(function(){
		var gutter = parseInt(jQuery('.post').css('marginBottom'));
		var container = jQuery('#posts');

		container.masonry({
			gutter: gutter,
			itemSelector: '.post',
			columnWidth: '.post'
		});

		jQuery(window).bind('resize', function(){
			if(!jQuery('#posts').parent().hasClass('.container')){
				post_width = jQuery('.post').width() + gutter;
				jQuery('#posts, body > #grid').css('width','auto');

				posts_per_row = jQuery('#posts').innerWidth() / post_width;
				floor_posts_width = (Math.floor(posts_per_row)*post_width) - gutter;
				ceil_posts_width =  (Math.ceil(posts_per_row)*post_width) - gutter;
				posts_width = (ceil_posts_width > jQuery('#posts').innerWidth())?floor_posts_width:ceil_posts_width;
				if( posts_width == jQuery('.post').width()){
					posts_width = '100%';
				}
				// jQuery('#posts,#grid').css('width',posts_width);
				// jQuery('#grid').css({'margin':'0 auto'});
			}
		}).trigger('resize');

	});
</script>
</html>